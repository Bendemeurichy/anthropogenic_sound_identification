data:
  df_path: "data/aircraft_data.csv"
  sample_rate: 16000
  segment_length: 4.0 # seconds
  snr_range: [-5, 5] # dB range for mixing
  n_coi_classes: 1
  # Ratio of background-only to COI-containing examples during training
  background_only_prob: 2.0
  # How many non-COI files to sum for background-only examples
  background_mix_n: 2
  # Augmentation multiplier: each COI sample seen 3x with random augmentations
  augment_multiplier: 3

# Model settings (using base model defaults)
model:
  type: "groupcomm" # 'improved' or 'groupcomm'
  out_channels: 128 # base model default
  in_channels: 512 # base model default
  num_blocks: 18 # base model default
  upsampling_depth: 4 # base model default
  enc_kernel_size: 21 # base model default
  enc_num_basis: 512 # base model default

# Training settings
training:
  # === PERFORMANCE OPTIMIZATIONS ===
  batch_size: 16 # Increased from 4 for better GPU utilization
  grad_accum_steps: 1
  use_amp: true
  num_epochs: 300 # Increased from 200 for proper convergence
  lr: 1e-4
  num_workers: 4 # Parallel data loading (adjust based on CPU cores, 0 saves RAM)
  pin_memory: true # Faster CPU->GPU transfer
  persistent_workers: true # Keep workers alive between epochs
  prefetch_factor: 2 # Preload 2 batches per worker
  clip_grad_norm: 5.0
  patience: 45 # early stopping patience
  checkpoint_dir: "checkpoints"
  device: "cuda:0" # pin to first GPU
  compile_model: true # Enable torch.compile for 2x speedup
  compile_backend: "inductor" # or "eager" if crashes
  # Emphasize COI (class-of-interest) in loss. Higher -> more weight to COI.
  class_weight: 1.3 # Reduced from 1.5 for better balance
  # Optional auxiliary L1 waveform loss weight (0.0 disables).
  aux_waveform_weight: 0.001
  # Learning rate warmup: ramp LR from 0 to lr over this many steps (prevents early NaN)
  warmup_steps: 500 # Increased from 20 for stabler training
  # Validation frequency: run validation every N epochs (1 = every epoch)
  validate_every_n_epochs: 2 # Validate less frequently to save time
  # Random seed for reproducibility
  seed: 42
